{
  "name": "Receipt Vision Analysis",
  "description": "Analyzes receipt images using Claude Vision and returns extracted data",
  "nodes": [
    {
      "parameters": {
        "path": "receipt-analyze",
        "responseMode": "onReceived",
        "method": "POST",
        "options": {}
      },
      "id": "webhook-trigger",
      "name": "Webhook",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [100, 300]
    },
    {
      "parameters": {
        "model": "claude-3-5-sonnet-20241022",
        "options": {},
        "messages": [
          {
            "message": "Lue oheinen kuitti ja palauta sen tiedot pyydetyssä JSON-muodossa.",
            "role": "user"
          }
        ],
        "systemPrompt": "Olet suomalainen taloushallinnon assistentti. Tehtäväsi on lukea suomalaisia kuitteja ja palauttaa niiden tiedot AINOASTAAN seuraavassa JSON-muodossa. Älä kirjoita mitään muuta kuin pyydetty JSON-objekti.\n\n{\n  \"ostopaikka\": \"K-Market Asematie\",\n  \"paivays\": \"YYYY-MM-DD\",\n  \"summa_yhteensa\": 124.50,\n  \"alv_prosentti\": 24,\n  \"alv_summa\": 24.10\n}\n\nJos et pysty lukemaan jotain arvoa, aseta sen arvoksi null.",
        "imageInput": "={{ $binary.data }}"
      },
      "id": "claude-vision",
      "name": "Claude Vision Analysis",
      "type": "n8n-nodes-base.openAi",
      "typeVersion": 1,
      "position": [350, 300],
      "credentials": {
        "anthropicApi": "=anthropic_api_key"
      }
    },
    {
      "parameters": {
        "responseBody": "={{ JSON.parse($json.message.content[0].text) }}",
        "responseCode": 200
      },
      "id": "webhook-response",
      "name": "Respond with Data",
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1,
      "position": [600, 300]
    }
  ],
  "connections": {
    "webhook-trigger": {
      "main": [
        [
          {
            "node": "claude-vision",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "claude-vision": {
      "main": [
        [
          {
            "node": "webhook-response",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {},
  "staticData": null,
  "createdAt": "2025-11-10T00:00:00.000Z",
  "updatedAt": "2025-11-10T00:00:00.000Z"
}
